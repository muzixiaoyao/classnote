# 2.Linux新手命令

## 常用系统工作命令

### echo

echo命令用于在终端输出字符串或变量提取后的值，格式为“echo [字符串 | $变量]”。  

例如，把指定字符串“localhost.com”输出到终端屏幕的命令为：  

```bash
# echo "hello eagle"
hello eagle
```

下面，我们使用$变量的方式提取变量SHELL的值，并将其输出到屏幕上：  

```bash
[root@localhost ~]# echo $SHELL
/bin/bash
```

### date

date命令用于显示及设置系统的时间或日期格式为：  
date [选项] [+指定的格式]  

按照“小时:分钟 年/月/日 ”的格式查看当前系统时间的date命令：  

```bash
# date "+%H:%M %Y/%m/%d"
09:44 2019/01/18
```

修改当前的时间  

```bash
# date -s "2020-01-01 00:00:00"
Wed Jan  1 00:00:00 CST 2020
```

通过时间服务器将当前时间同步回来  

```bash
# ntpdate cn.pool.ntp.org
18 Jan 09:49:27 ntpdate[11895]: step time server 5.103.139.163 offset -30031954.073538 sec
# date
Fri Jan 18 09:49:33 CST 2019
```

| 参数 | 作用        |
|----|-----------|
| %t | 跳格[Tab键]  |
| %H | 小时（00～23） |
| %I | 小时（00～12） |
| %M | 分钟（00～59） |
| %S | 秒（00～59）  |
| %j | 今年中的第几天   |

### wget

wget命令用于在终端中下载网络文件，格式为“wget [参数] 下载地址”。  

```bash
[root@localhost ~]# wget https://dldir1.qq.com/qqfile/qq/QQ9.0.9/24436/QQ9.0.9.24436.exe
--2019-01-18 10:07:13--  https://dldir1.qq.com/qqfile/qq/QQ9.0.9/24436/QQ9.0.9.24436.exe
Resolving dldir1.qq.com (dldir1.qq.com)... 221.228.67.176, 222.186.49.48, 222.186.49.45, ...
Connecting to dldir1.qq.com (dldir1.qq.com)|221.228.67.176|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 76319096 (73M) [application/octet-stream]
Saving to: ‘QQ9.0.9.24436.exe’

100%[=========================================>] 76,319,096  25.6MB/s   in 2.8s   

2019-01-18 10:07:16 (25.6 MB/s) - ‘QQ9.0.9.24436.exe’ saved [76319096/76319096]

[root@localhost ~]# ls
anaconda-ks.cfg  QQ9.0.9.24436.exe
```

| 参数 | 作用                 |
|----|--------------------|
| -b | 后台下载模式             |
| -P | 下载到指定目录            |
| -t | 最大尝试次数             |
| -c | 断点续传               |
| -p | 下载页面内所有资源，包括图片、视频等 |
| -r | 递归下载               |

### ps

ps命令用于查看系统中的进程状态，格式为“ps [参数]”。  
常用ps命令组合：

```bash
[root@localhost ~]# ps –aux
[root@localhost ~]# ps –ef
```

-a：显示所有进程  
-u：用户以及其他详细信息  
-x：显示没有控制终端的进程  

PS： 在Linux系统中，有5种常见的进程状态，分别为运行(R)、中断(S)、不可中断(D)、僵死(Z)与停止(T)  

### top

top命令用于动态地监视进程活动与系统负载等信息，其格式为top。能够动态地查看系统运维状态，完全将它看作Linux中的“强化版的Windows任务管理器”。  

第1行：系统时间、运行时间、登录终端数、系统负载（三个数值分别为1分钟、5分钟、15分钟内的平均值，数值越小意味着负载越低）。  
第2行：进程总数、运行中的进程数、睡眠中的进程数、停止的进程数、僵死的进程数。  
第3行：用户占用资源百分比、系统内核占用资源百分比、改变过优先级的进程资源百分比、空闲的资源百分比等。
第4行：物理内存总量、内存使用量、内存空闲量、作为内核缓存的内存量。  
第5行：虚拟内存总量、虚拟内存使用量、虚拟内存空闲量、已被提前加载的内存量。  

### pidof

pidof命令用于查询某个指定服务进程的PID值，格式为“pidof [参数] [服务名称]”。  

每个进程的进程号码值（PID）是唯一的，因此可以通过PID来区分不同的进程。例如，可以使用如下命令来查询本机上sshd服务程序的PID：  

```bash
# pidof top
2601
```

### kill

kill命令用于终止某个指定PID的服务进程，格式为“kill [参数] [进程PID]”。  

接下来，我们使用kill命令把上面用pidof命令查询到的PID所代表的进程终止掉，其命令如下所示。这种操作的效果等同于强制停止sshd服务。  

```bash
[root@localhost ~]# kill %[pid]
```

例如找到top进程的pid并且用kill命令结束这个进程  

```bash
# pidof top
10635
# kill -9 10635
# pidof top
```

### killall (慎用)

killall命令用于终止某个指定名称的服务所对应的全部进程，格式为：“killall [参数] [服务名称]”。
通常来讲，复杂软件的服务程序会有多个进程协同为用户提供服务，如果逐个去结束这些进程会比较麻烦，此时可以使用killall命令来批量结束某个服务程序带有的全部进程。  

```bash
[root@localhost ~]# yum install psmisc
[root@localhost ~]# pidof sshd
[root@localhost ~]# killall sshd
```

### pkill (慎用)

根据进程名结束相应的进程，尽量将进程名写完整，不然可能会结束其他进程中含有输入的关键字的进程  

用法：pkill [关键字]  
关键字就是进程名的部分文本，尽可能的完整，也要确保没有其他进程含有关键字，不然可能会造成错误杀死其他进程  

```bash
[root@localhost ~]# pkill httpd
```

## 系统状态检测命令

### ifconfig

ifconfig命令用于获取网卡配置与网络状态等信息，格式为“ifconfig [网络设备] [参数]”。  

centos7开始，在minimal安装的环境下没有这个命令，要安装net-tools软件包才又这个工具  

```bash
[root@localhost ~]# yum install net-tools -y
```

使用ifconfig 查看所有网络接口信息  

```bash
[root@localhost ~]# ifconfig 
ens33: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.147.128  netmask 255.255.255.0  broadcast 192.168.147.255
        inet6 fe80::6cda:d133:5b42:b090  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:bc:1e:1b  txqueuelen 1000  (Ethernet)
        RX packets 233594  bytes 343220618 (327.3 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 27430  bytes 13704265 (13.0 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1  (Local Loopback)
        RX packets 68  bytes 5920 (5.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 68  bytes 5920 (5.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
```

如果要查看某个指定的接口的信息，就在ifconfig命令后面加上接口的名字，例如 ```ifconfig ens33```。  

我们也可以使用ifconfig命令临时修改指定网卡的ip地址，但不能修改网关  

```bash
[root@localhost ~]# ifconfig ens33 192.168.147.100 netmask 255.255.255.0
```

修改完成后xshell会卡住，这是正常现象，因为xshell是通过ssh协议连接linux系统的，所以IP变了，远程终端一定会断，这时候卡住只是ssh在重试，一但超时，则会直接断开，这时候我们可以直接开启另一个会话进行连接。  

这时候我们再次通过ssh连上去发现网是断的，ping不通114.114.114.114了，因为网关没有设置  

```bash
[root@localhost ~]# route add default gw 192.168.147.2
```

这个时候，通信又会正常恢复了  

